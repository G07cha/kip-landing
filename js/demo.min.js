var ENDPOINT="http://cors-anywhere.herokuapp.com/http://kip-messenger.us-west-2.elasticbeanstalk.com";function request(b){return fetch(ENDPOINT+b).then(function(a){return a.json()})}var API={processMessage:function(b,a){return request("/processMessage?author="+b+"&message="+a)}},List=function(b,a){a=void 0===a?{}:a;this.container=document.querySelector(b);this.settings=a};
List.prototype.add=function(b){var a=document.createElement("li");a.classList.add(this.settings.itemClass);a.innerHTML=b;this.container.appendChild(a);this.container.scrollTop=this.container.scrollHeight};function messageSendHandler(b){b.preventDefault();b=messageInput.value;messages.add("Alex: "+b);API.processMessage("Alex",b).then(function(a){"object"===typeof a&&("task"===a.type?tasks.add(a.output):"portrait"===a.type&&portrait.add(a.output))});messageInput.value=""}
var messages=new List(".message-list",{itemClass:"list-group-item"}),tasks=new List(".task-list"),portrait=new List(".psycho-list"),form=document.getElementById("message-form"),messageInput=document.getElementById("message-field");form.addEventListener("submit",messageSendHandler);