var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}();
function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var ENDPOINT="http://kip-messenger.us-west-2.elasticbeanstalk.com";function request(a,b,c){return fetch(ENDPOINT+b,{method:a,body:JSON.stringify(c),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(function(a){return a.json()})}
var API={processMessage:function(a,b){return request("POST","/processMessage",{author:a,message:b})}},List=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,a);this.container=document.querySelector(b);this.settings=c}_createClass(a,[{key:"add",value:function(a){var b=document.createElement("li");b.classList.add(this.settings.itemClass);b.innerHTML=a;this.container.appendChild(b);this.container.scrollTop=this.container.scrollHeight}}]);return a}();
function messageSendHandler(a){a.preventDefault();a=messageInput.value;messages.add("Alex: "+a);API.processMessage("Alex",a).then(function(a){"object"===("undefined"===typeof a?"undefined":_typeof(a))&&("task"===a.type?tasks.add(a.output):"portrait"===a.type&&portrait.add(a.output))});messageInput.value=""}var messages=new List(".message-list",{itemClass:"list-group-item"}),tasks=new List(".task-list"),portrait=new List(".psycho-list"),form=document.getElementById("message-form"),messageInput=document.getElementById("message-field");
form.addEventListener("submit",messageSendHandler);